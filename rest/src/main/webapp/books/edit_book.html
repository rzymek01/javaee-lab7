<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <title>Books</title>
        <script src="https://code.jquery.com/jquery-latest.min.js"></script>
    </head>
    <body>
        <h1>Books</h1>
        <table>
            <tr>
                <td>ID:</td>
                <td><input type="text" name="id" id="book_id"/></td>
            </tr>
            <tr>
                <td>Title:</td>
                <td><input type="text" name="title" id="book_title"/></td>
            </tr>
            <tr>
                <td>Author:</td>
                <td><input type="text" name="author" id="book_author"/></td>
            </tr>
        </table>
        <button>Save</button>
        <a href="list_books.html"><button>Back</button></a>

        <script>
            function get(name) {
                if (name = (new RegExp('[?&]' + encodeURIComponent(name) + '=([^&]*)')).exec(location.search))
                    return decodeURIComponent(name[1]);
            }

            function updateBook() {
                var book_id = get('book_id');
                if (book_id != null) {
                    $.getJSON('../resources/books/' + book_id, function (data) {
                        $('#book_id').val(data.id);
                        $('#book_title').val(data.title);
                    });
                }
            }

            $(document).ready(function () {
                updateBook();
            });
        </script>
    </body>
</html>
